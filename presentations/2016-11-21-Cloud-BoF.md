% PB overview
% Cloud BoF@CSC
% Olli Tourunen, 2016-11-21

# Overview

## Pouta Blueprints? Pebbles? Notebooks? What? 

- we are in process of renaming Pouta Blueprints software to Pebbles
- the name of our hosted service pb.csc.fi will also change, probably to notebooks.csc.fi
- in this presentation, I'll use 
    - PB for short for the software
    - pb.csc.fi for the service

## What is PB?

- web interface to resources provisioned in the cloud
- open source project hosted at [GitHub](https://github.com/CSC-IT-Center-for-Science/pouta-blueprints)
- developed by CSC - IT Center for Science 
- buzzwords: Docker, Angular, RESTful, Ansible, self service, SAML2, notebook

## Concepts

- administrators make _blueprints_, e.g. configurations or templates
- users launch _instances_ of blueprints
    - currently instances can be containers or VMs
- instances are time limited, quota limited, disposable
- users are authenticated (unlike http://tmpnb.org)
- user accounts are either
    - locally added by admin (via activation email)
    - based on SAML2 identity (HAKA here in Finland)

## pb.csc.fi service

- CSC runs a PB server at https://pb.csc.fi
- we offer containerized RStudio and IPython/Jupyter notebooks
- open to anyone with HAKA federated identity credentials
- currently in public beta
- deployed in cPouta
- actively used by both external and internal pilot users (250 external users have tried it)

# Use case: Notebooks for a course on pb.csc.fi

## Problem statement by a Professor 

"I would like to have an RStudio environment where I can just point my
students to by sharing a web link. The environment should contain the latest
version of the exercises I made for the course."
 
## The Professor 

- prepares a notebook for a lecture
    - the notebook can download more material when launched
- points the students to https://pb.csc.fi

## The Student

- receives a link to the system (and activation token if necessary)
- opens a browser and logs in 
- launches an instance of the course blueprint
- learns something

# [Demo](https://pb.csc.fi)

# Upcoming features

## User grouping

- currently no grouping of users, just a flat list with admin flag on or off
- groups are useful for  
    - giving access to private blueprints
    - creating global blacklists, whitelists

## Group Owners and Managers

- at the moment only system level admins can manage blueprints
- in pb.csc.fi CSC admins will have to make all modifications to blueprints - this does not scale
- enter Group Owners and Managers
    - can create user groups (users join with an access code)
    - can customize selected properties of blueprints (like where to download course material)

## OpenShift driver

- at the moment container instances are run on top of VMs managed by PB
- with OpenShift driver, you can use an existing OpenShift cluster to host the instances
- benefits over the current implementation (DockerDriver)
    - less proprietary code and procedures
    - platform managed by a dedicated team
    - 1000+ vs. 1 contributors for the container management system 
- storage persistency is easy to implement

## Persistent storage

- currently all instance data is deleted when the instance lifetime ends
- we are planning to introduce a semi-persistent small work dir
    - every user get a private small working directory
    - directories are cleaned after 1 month of inactivity
    - warning mails sent before removing
- heavy lifting done by OpenShift

## PB service from pilot to production

# Finally

## Summary

- PB is open source software for sharing your cloud resources
    - anyone is free to deploy a copy and contribute to code
- pb.csc.fi is a service operated by CSC
    - users can launch notebooks
    - open for Finnish researchers and students

## Thanks! 

Questions, please!
