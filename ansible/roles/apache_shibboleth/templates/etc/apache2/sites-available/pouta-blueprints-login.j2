<VirtualHost *:80>

    ServerAdmin {{ apache_server_admin_email }}

    ServerName https://{{ domain }}:443
    UseCanonicalName On

    <Location /login>
        AuthType shibboleth
        ShibRequestSetting requireSession 1
        ShibUseHeaders On
        require shib-session

        ProxyPass http://api:{{ gunicorn_bind_port }}/login
        ProxyPassReverse http://api:{{ gunicorn_bind_port }}/login
    </Location>

    ErrorLog {{ apache_error_log_file }}
    CustomLog {{ apache_access_log_file }} combined

</VirtualHost>
